# üõ≥ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —á–µ—Ä–µ–∑ Docker

Bpium Docker ‚Äî —ç—Ç–æ –≤–µ—Ä—Å–∏—è Bpium –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –æ–±–ª–∞–∫–æ. \
–†–µ—à–µ–Ω–∏–µ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ —Å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–µ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏.

## –ì–ª–æ—Å—Å–∞—Ä–∏–π

* **–•–æ—Å—Ç** - –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –∑–∞–ø—É—â–µ–Ω—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã **Docker**
* [**Docker**](https://www.docker.com/) - –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—É—é –∏–∑–æ–ª—è—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
* [**–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**](https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%BD%D1%82%D0%B5%D0%B9%D0%BD%D0%B5%D1%80%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F) -  –º–µ—Ç–æ–¥ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º —è–¥—Ä–æ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ. –≠—Ç–∏ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã (–æ–±—ã—á–Ω–æ –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ –∏–ª–∏ –∑–æ–Ω–∞–º–∏) —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω—ã –æ—Ç–¥–µ–ª—å–Ω–æ–º—É —ç–∫–∑–µ–º–ø–ª—è—Ä—É –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

{% hint style="warning" %}
–í–Ω–∏–º–∞–Ω–∏–µ: –¥–∞–Ω–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —Ç–æ–ª—å–∫–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ.
{% endhint %}

Bpium Docker —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ Docker:

* **Bpium** ‚Äî —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –ª–æ–≥–∏–∫–∏
* **Bpium S3** ‚Äî —Å–µ—Ä–≤–µ—Ä —Ñ–∞–π–ª–æ–≤–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
* **Bpium BPM** ‚Äî —Å–µ—Ä–≤–µ—Ä –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤
* **PostgreSQL** ‚Äî —Å–µ—Ä–≤–µ—Ä –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
* **Redis**‚Äî —Å–µ—Ä–≤–µ—Ä —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω—ã –Ω–∞ –æ–¥–Ω–æ–º –∏–ª–∏ —Ä–∞–∑–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö, –≤–∫–ª—é—á–∞—è –∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ [—ç—Ç–æ–π](architecture.md) –∏ —Ç–∞–∫ –∂–µ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö - —ç—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

–ì–æ—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç:

* –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (Alpine)
  * Docker
    * –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä Bpium
    * –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä BPM
    * –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä Bpium-S3
    * –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä Postgres
    * –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä Redis
  * –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Postgres:
  * –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Redis
  * –•—Ä–∞–Ω–∏–ª–∏—â–µ Bpium-S3

–°–µ—Ç—å —É—Å—Ç—Ä–æ–µ–Ω–∞ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –æ–¥–Ω—É —Å–µ—Ç—å, –∏–º–µ—è –¥–æ—Å—Ç—É–ø –∫ –¥—Ä—É–≥ –¥—Ä—É–≥—É.
* –î–æ—Å—Ç—É–ø –≤–æ –≤–Ω–µ—à–Ω—é—é —Å–µ—Ç—å (–∏–Ω—Ç–µ—Ä–Ω–µ—Ç) –∏–º–µ—é—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
* –û–±—Å–ª—É–∂–∏–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –ø—Ä–∏—Ö–æ–¥—è—â–∏–µ –Ω–∞ —Ö–æ—Å—Ç –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ —Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–º —ç—Ç–æ —Ä–∞–∑—Ä–µ—à–∏–ª–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏.

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ docker-compose

```
version: "3.8"
volumes: 
  storagebpium:
  redisstorage:
  postgresstorage:
services:
  bpium:
    container_name: bpium
    image: bpiumdocker/bpium
    ports:
      - "80:80"
      - "443:443"
    secrets:
      - cert
      - cert-key
    environment:
      SERIAL_NUMBER: ''
      DB_CONNECTION_STRING: 'postgres://postgres:password@postgres:5432/bpium_database'
      COOKIE_SECRET: ''
      SCRIPTS_TOKEN_SECRET: ''
      S3_HOST: '–≤–Ω–µ—à–Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞'
      S3_KEY: ''
      S3_SECRET: ''
      BPM_HOST: 'bpm'
      BPM_SECRET: ''
    depends_on:
      - postgres
      - bpm
      - bpium-s3
    logging:
      driver: "json-file"
      options:
        max-size: "200m"
        max-file: "3"
  
  postgres:
    container_name: postgres
    image: "postgres:alpine"
    environment:
      POSTGRES_USER: "postgres"
      POSTGRES_PASSWORD: "password"
      POSTGRES_DB: "bpium_database"
      POSTGRES_INITDB_ARGS: "--locale=ru_RU"
      PGDATA: "/postgresdb"
    command: ["postgres", "-c", "log_statement=all", "-c", "log_destination=stderr"]
    volumes:
      - postgresstorage:/postgresdb
    restart: unless-stopped
    logging:
      driver: "json-file"
      options:
        max-size: "200m"
        max-file: "3"

  bpm:
    container_name: bpm
    image: bpiumdocker/bpm
    secrets:
      - cert
      - cert-key
    environment:
      BPM_SECRET: ''
      BPM_QUEUE_HOST: 'redis'
      BPM_QUEUE_LOCAL: 'false'
    depends_on:
      - redis
    logging:
      driver: "json-file"
      options:
        max-size: "200m"
        max-file: "3"

  bpium-s3:
    container_name: bpium-s3
    image: bpiumdocker/s3
    ports:
      - "2020:2020"
    secrets:
      - cert
      - cert-key
    environment:
      S3_HOST: '–≤–Ω–µ—à–Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞'
      S3_KEY: ''
      S3_SECRET: ''
    volumes:
      - storagebpium:/bpiumpac/storage
    logging:
      driver: "json-file"
      options:
        max-size: "200m"
        max-file: "3"

  redis:
    container_name: redis
    image: "redis:alpine"
    command: > 
      --appendonly yes
      --appendfilename "redisdb.aof"
    volumes:
      - redisstorage:/data
    restart: unless-stopped
    logging:
      driver: "json-file"
      options:
        max-size: "200m"
        max-file: "3"

secrets:
  cert:
    file: ./cert
  cert-key:
    file: ./cert-key
```

### **SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã**

Bpium –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –∑–∞—â–∏—â–µ–Ω–Ω–æ–º –∫–∞–Ω–∞–ª–µ —Å–≤—è–∑–∏ (HTTPS). \
–î–ª—è —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –∏–º–µ—Ç—å –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –∏ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Class 1 –∏–ª–∏ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π.\
–î–ª—è —Ä–∞–±–æ—Ç—ã –º—É–ª—å—Ç–∏–¥–æ–º–µ–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ Bpium —Ç—Ä–µ–±—É–µ—Ç—Å—è wildcard-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Class 2 –∏–ª–∏ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π.

–°–ø–æ—Å–æ–±—ã —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞:

* –ü–æ-—É–º–æ–ª—á–∞–Ω–∏—é:\
  –ü–æ–ª–æ–∂–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (.crt) –∏ –∫–ª—é—á —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –≤ –æ–¥–Ω—É –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å docker-compose.yml –∏ –Ω–∞–∑–æ–≤–∏—Ç–µ –∏—Ö `cert` –∏ `cert-key` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ.
* –°–≤–æ–π:\
  –ù—É–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –ø—É—Ç–∏ –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏ –∫–ª—é—á–∞ –≤ —Ñ–∞–π–ª–µ docker-compose.yml:\
  `secrets:` \
  &#x20; `cert:` \
  &#x20;   `file: ./cert` \
  &#x20; `cert-key:` \
  &#x20;   `file: ./cert-key`

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (docker-compose.yml)

–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–∏–ø–∏—É–º–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ —É–∫–∞–∑–∞–Ω—ã –≤ —Å–µ–∫—Ü–∏–∏ environments, –≤ —Ñ–æ—Ä–º–∞—Ç–µ:

`HTTPS: 'true'`\
`SERIAL_NUMBER:'0000-0000-0000-0000'`\
`COOKIE_SECRET:'somestring'`\
`SCRIPTS_TOKEN_SECRET: 'anotherstring'`

{% hint style="warning" %}
–£—á—Ç–∏—Ç–µ: –µ—Å–ª–∏ –≤–∞—à–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ - –≤–∞–º –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.
{% endhint %}

–°–ø–∏—Å–æ–∫ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –ø–æ —ç—Ç–∏–º —Å—Å—ã–ª–∫–∞–º:\
[Bpium](https://docs.bpium.ru/server/parametry-config.env/bpium)\
[BPM](https://docs.bpium.ru/server/parametry-config.env/bpium-bpm)\
[S3](https://docs.bpium.ru/server/parametry-config.env/bpium-s3)

### –•—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ Persist storage

–û–¥–Ω–∏–º –∏–∑ –º–∏–Ω—É—Å–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —è–≤–ª—è–µ—Ç—Å—è —Ç–æ —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –≠—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ–º–æ–π, –µ—Å–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –î–ª—è —ç—Ç–æ–≥–æ —Å–ª—É—á–∞—è –≤ Docker –µ—Å—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–≤—è–∑—ã–≤–∞—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π —Ö–æ—Å—Ç–∞. –≠—Ç–æ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ –∫–æ–º–∞–Ω–¥—É: `docker volume ls.`

## –ó–∞–ø—É—Å–∫

–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å–æ—Å—Ç–æ–∏—Ç –≤—Å–µ–≥–æ –∏–∑ –æ–¥–Ω–æ–≥–æ —ç—Ç–∞–ø–∞ - —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è.&#x20;

–ü—Ä–µ–π–¥–∏—Ç–µ –≤ –∫–∞—Ç–∞–ª–æ–≥ —Å —Ñ–∞–π–ª–æ–º `docker-compose.yml` –∏ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ - —Å –ø—Ä–∞–≤–∞–º–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:`docker-compose up -d`\
–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤ —Ñ–∞–π–ª–µ docker-compose.yml

–ï—Å–ª–∏ –≤—Å–µ —Å–¥–µ–ª–∞–Ω–æ –≤–µ—Ä–Ω–æ - —Ç–æ –ë–∏–ø–∏—É–º –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ. –£–±–µ–¥–∏–º—Å—è —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∏—Å–ø—Ä–∞–≤–Ω–æ:`docker ps.`–ï—Å–ª–∏ –≤—Å–µ —Ö–æ—Ä–æ—à–æ - –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:

![–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. Up - —Å–≤–∏–¥–µ—Ç–µ–ª—å—Å—Ç–≤—É–µ—Ç –æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ.](<../.gitbook/assets/image (44).png>)

–¢–µ–ø–µ—Ä—å –≤–∞—à –ë–∏–ø–∏—É–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –¥–æ–º–µ–Ω–Ω–æ–º—É –∏–º–µ–Ω–∏/–∞–¥—Ä–µ—Å—É —Ö–æ—Å—Ç–∞.\
–°–∞–º –≤—Ö–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω [–∑–¥–µ—Å—å](https://docs.bpium.ru/server/zapusk#vkhod-v-prilozhenie).

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ë–∏–ø–∏—É–º–∞ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É:

```
docker pull bpiumdocker/bpium:latest && docker pull bpiumdocker/bpm:latest && docker pull bpiumdocker/s3:latest 
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –æ–±—Ä–∞–∑–æ–≤ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç —Å–∞–º—ã–µ –Ω–æ–≤—ã–µ.

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —á—Ç–æ–±—ã Docker –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –Ω–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã:&#x20;

```
docker-compose up -d
```

## –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–æ–≥–æ–≤

–î–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –∏ –∏–∑—É—á–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å –ë–∏–ø–∏—É–º–æ–º –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ Docker.

–°–Ω–∞—á–∞–ª–∞, –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å –∏–º—è –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–µ–≥–æ –≤–∞—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. \
–î–ª—è —ç—Ç–æ–≥–æ –≤–≤–µ–¥–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```
docker ps
```

–í–∞–º –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, –≤–∫–ª—é—á–∞—è –Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ.

–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–æ–≥–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤–≤–µ—Å—Ç–∏ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É:

```
docker logs –∏–º—è_–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```

## –ë—ç–∫–∞–ø—ã, –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

{% hint style="warning" %}
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Bpium —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è —Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö.\
–ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏, —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —ç—Ç–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.
{% endhint %}

{% tabs %}
{% tab title="PostgreSQL" %}
**–ë—ç–∫–∞–ø:**

```
docker exec -i postgres_container_name pg_dump --username pg_username --password pg_password database_name > /path/bpium_dump
```

* `docker exec -i postgres_container_name` - –∏—Å–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ
* `pg_dump` - —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–µ–∫–∞–ø-—Ñ–∞–π–ª–∞ –¥–∞–Ω–Ω—ã—Ö
* `--username pg_username` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é `postgres`)
* `--password pg_password` - –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Å–º. docker-compose.yml)
* `database_name` - –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é `bpium_database`)
* `/path/bpium_dump` - —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫—É–¥–∞ –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–∞–º–ø –≤ —Å–∏—Å—Ç–µ–º–µ —Ö–æ—Å—Ç–∞

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:

```
docker exec -i postgres_container_name pg_restore --username pg_username --password pg_password database_name < /path/bpium_dump
```

* `docker exec -i postgres_container_name` - –∏—Å–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ
* `pg_restore` - —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–µ–∫–∞–ø-—Ñ–∞–π–ª–∞
* `--username pg_username` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é `postgres`)
* `--password pg_password` - –ø–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Å–º. docker-compose.yml)
* `database_name` - –∏–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é `bpium_database`)
* `/path/bpium_dump` - —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∏–∑ –∫–∞–∫–æ–≥–æ –¥–∞–º–ø–∞ –±—É–¥–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–∞–∑–∞

#### –ú–∏–≥—Ä–∞—Ü–∏—è:

–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –±–∞–∑–æ–π –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –±–∞–∑–æ–π.\
–ö –ø—Ä–∏–º–µ—Ä—É, –Ω–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–π –¥–∏—Å–∫:\
`mv /home/bpium_data/postgres /mnt/sdb1/`
{% endtab %}
{% endtabs %}

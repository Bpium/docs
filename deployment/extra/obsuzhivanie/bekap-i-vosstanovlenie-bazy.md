---
description: >-
  Приложение Bpium самостоятельно не занимается резервированием сервера баз
  данных и бэкапированием данных. При необходимости требуется индивидуальная
  настройка этих процессов.
---

# Бэкап и восстановление базы

## Создание бэкапа

1. **Скопируйте файлы** сборки в отдельную папку: исполняемые файлы, конфигурационный файл, вложенные папки
2. **Сделайте бэкап** базы данных:\
   `pg_dump -h хост -U логин -W -Ft -b -E UTF8 -v -f "/file_20160501" "db_name"`

* `pg_dump` — утилита для создания бэкап-файла данных
* `-h` — задает адрес сервера
* `-U` — задает имя пользователя для подключения к базе данных, чтобы все объекты сохранились, необходимо указать пользователя с соответствующими правами доступа к таким объектам
* `-W` — означает вывести запрос пароля на подключение к базе данных
* `-Ft` — ключ -F позволяет задать формат бэкап-файла, t - означает tar-формат
* `-b` — позволяет включить в бэкап большие двоичные объекты
* `-E UTF8` — выбирает кодировку UTF8 для бэкапа данных
* `-v` — выводит детали процесса создания резервной копии
* `-f "/file_20160501"` — задает путь и имя бэкап-файла
* `"db_name"` — имя базы данных

## Восстановление из бэкапа

1. **Скопируйте файлы** сборки в папку Бипиума: исполняемые файлы, конфигурационный файл, вложенные папки
2. **Восстановите базу из бэкап-файла:**\
   `pg_restore -h хост -U логин -d "db_name" -W -v "/path/file_20160501"`

* `pg_restore` — утилита для восстановления данных из бэкап-файлов
* `-h` — задает адрес сервера
* `-U` — задает имя пользователя для подключения к базе данных
* `-d "db_name"` — задает имя базы данных, в которую будет восстановлен бэкап
* `-W` — означает вывести запрос пароля на подключение к базе данных
* `-v` — выводит детали процесса создания резервной копии
* `"/path/file_20160501"` — задает путь и имя бэкап-файла

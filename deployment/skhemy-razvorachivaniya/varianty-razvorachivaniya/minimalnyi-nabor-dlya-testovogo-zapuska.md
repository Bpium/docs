---
description: >-
  Односерверная архитектура, работающая по HTTP без балансировщика. Самый
  простой вариант разворачивания.
---

# Минимальный набор для тестового запуска

### **Описание:** <a href="#w3eotrjqm8k1" id="w3eotrjqm8k1"></a>

Все 3 приложения и база данных работают на одном сервере, клиент обращается к приложениям напрямую по HTTP.&#x20;

Данный вариант используется крайне редко, так как сервисов, работающих на незащищенном канале связи HTTP, с каждым днем становится всё меньше и меньше, поэтому данную схему рекомендуем использовать только для тестового запуска Бипиума.

Подробная инструкция данного варианта разворачивания на Windows-сервере описана в нашей статье [“Установка как служба”](https://docs.bpium.ru/deployment/service)

![](../../../.gitbook/assets/1.jpeg)

#### **Требуемое ПО:** <a href="#ggtv9pqb3ggx" id="ggtv9pqb3ggx"></a>

* Дистрибутив Bpium
* PostgreSQL
* Redis

#### **Как настроить:** <a href="#id-4dgj8yy540gq" id="id-4dgj8yy540gq"></a>

1. Установить PostgreSQL и создать пустую базу данных\
   • Версия не ранее 10 (допустимы 11+, 12+, 13+, 14+)\
   • Сервер PostgreSQL должен быть установлен на том же сервере, что и Bpium, или на другом отдельном сервере, но в пределах локальной сети (если на удаленном сервере, то могут будут большие задержки)\
   • Сервер PostgreSQL должен работать как служба (в Windows)
2. Установить Redis\
   • Версия: последняя\
   • Redis должен работать как служба (в Windows)\
   • Ссылка сборки для Windows:[ **https://github.com/MicrosoftArchive/redis/releases**](https://github.com/MicrosoftArchive/redis/releases)
3. Собрать конфигурационный файл config.env для Bpium.\
   Ознакомиться со всеми параметрами можно в статье [Параметры config.env](../../nastroika-i-zapusk/parametry-config.env/)\
   Необходимые минимальные для данной схемы параметры и их описание:

<table><thead><tr><th width="260.3333333333333">Параметр</th><th>Описание</th><th>Значение для схемы</th></tr></thead><tbody><tr><td>DB_CONNECTION_STRING</td><td>строка подключения к базе данных Бипиума. Формат: postgres://логин:пароль@адрес:порт/бд</td><td>Пример: postgres://user:password@localhost:5432/bpium_db</td></tr><tr><td>HOST</td><td>публичный/локальный IP-адрес или домен сервера для доступа из внешних ресурсов.</td><td>Пример: domen.ru или 213.48.87.211</td></tr><tr><td>PORT_HTTP</td><td>порт веб-сервера Bpium для входящих HTTP запросов.</td><td>80</td></tr><tr><td>S3_HOST</td><td>публичный/локальный IP-адрес или домен сервера хранилища файлов для доступа из внешних ресурсов</td><td>Пример: domen.ru или 213.48.87.211</td></tr><tr><td>S3_PORT</td><td>порт хранилища файлов S3</td><td>2020</td></tr><tr><td>BPM_HOST</td><td>публичный/локальный IP-адрес или домен сервера для доступа из внешних ресурсов. Формат: domen.ru или 213.48.87.211</td><td>localhost</td></tr><tr><td>BPM_PORT</td><td>порт сервера процессов BPM</td><td>2030</td></tr></tbody></table>

4. Запустить исполняемый файл _bpium-setup_. Данный исполняемый файл подготовит базу данных для работы приложения: при пустой базе данных будут созданы необходимые для запуска таблицы, созданы системные данные; если эти данные уже есть в базе, при необходимости будет проведена миграция.
5. Запустить приложения Бипиума. Есть 2 варианта запуска:\
   &#x20;  1\) Просто запустить исполняемые файлы приложений (_bpium, bpium-s3, bpium-bpm_)\
   &#x20;  2\) Зарегистрировать приложения в системе в качестве служб/демонов.\
   Так как данную схему мы рекомендуем только для тестового развертывания, предлагаем воспользоваться первым вариантом
6. Проверка работы:\
   1\) Проверка основного Bpium-сервера (API): запустите браузер и в адресной строке наберите домен или IP-адрес, который был указан в _config.env_ файле в параметре HOST. Если откроется страница авторизации, значит Bpium-сервер работает. Стандартный логин и пароль для авторизации: _admin/admin_\
   _2)_ Проверка сервера хранилища файлов (_Bpium-S3_). Создайте новый каталог с одним полем типа Файл, создайте новую запись в данном каталоге и попробуйте загрузить туда любой небольшой файл. Если рядом с файлом не появился восклицательный знак, значит сервер хранилища файлов работает корректно.\
   3\) Проверка сервера исполнения процессов (_Bpium-BPM_). \
   &#x20;   • Перейдите в каталог “Сценарии”, создайте новую запись с любым сценарием(можно даже простой сценарий с компонентами _Начало процесса_ и _Конец процесса_). \
   &#x20;   • Перейдите в каталог “Внешние запросы”, создайте новую запись: в поле _URL_ укажите значение _test_, в поле _Сценарий_ выберите созданный ранее сценарий. \
   &#x20;   • В адресной строке наберите следующую строку:\
   &#xNAN;_`адрес_сервера/api/webrequest/test`_ где _адрес\_сервера_ - это домен или IP-адрес сервера Bpium (параметр HOST из файла _config.env_). \
   &#x20;   • Перейдите в каталог “Процессы” и проверьте появилась ли запись. Если запись появилась, то проверьте, что результат в данной записи “_Завершен_” - в этом случае можно сделать вывод, что сервер исполнения процессов работает корректно.

# Панель телефонии Oktell

Панель телефонии Oktell — дополнительный платный модуль.

## Телефон и номерной план

В приложение Бипиум встроена панель телефонии Oktell. Она показывает внутренний номерной план и позволяет вести разговоры из браузера: совершать внутренние и внешние звонки, переключать вызовы, организовывать конференции.

При первом использовании панели сотрудник авторизуется в ней: указывает адрес сервера Oktell и учетные данные. Адрес сервера — это доменное имя компьютера, с установленным серверным приложением Oktell. Например, oktell.mycompany.ru

![](../../../../../.gitbook/assets/oktell\_panel\_numberlist.jpg)

**ВАЖНО:** Согласно требованиям безопасности браузеров, для совершения звонков с сайта, соединение с сервером телефонии должно быть по защищенному каналу (HTTPS). Это значит, что для работы панели сервер Oktell должен иметь собственный домен и установленный SSL-сертификат. Инструкция по установке сертификата на сервер Oktell размещена в [википедии Oktell](http://wiki.oktell.ru).

## Кнопка «Позвонить»

При включенном модуле в карточке записи около поля типа «Телефон» появляется кнопка позвонить с дополнительными действиями: перевести звонок, поставить на удержание, пригласить в конференцию, сделать вызов громкой связью и другие.

![](../../../../../.gitbook/assets/button.jpg)

![](../../../../../.gitbook/assets/button\_2.jpg)

## Открытие карточки во время звонка

Панель телефонии Oktell в Bpium позволяет ассоциировать звонок с данными в системе. Например, с карточкой клиента, партнёра, обращения, звонка и так далее. Со звонком может быть связано несколько карточек, сотрудник выбирает ту или иную в зависимости от потребности. Например, карточку клиента или создания нового обращения. Панель также позволяет открывать одну из карточек автоматически при поступлении звонка.

![](../../../../../.gitbook/assets/oktell\_panel\_popups.jpg)

Логика ассоциации настраивается в сценариях Oktell. При переводе звонка на сотрудника Oktell передаёт информацию о необходимых ассоциациях, Bpium отображает соответствующие кнопки открытия карточек и открывает одну из них при необходимости.

### Установка ассоциации в Oktell

Список ассоциированных действий устанавливается в сценарии Oktell через компонент «Статус объекта»:

![](<../../../../../.gitbook/assets/oktell\_panel\_popups (1).jpg>)

* Действие — Установить
* Тип объекта — Линия
* Ключ линии — Номер линии
* Свойство/действие — Поле контента цепочки (заголовок)
* Значение — список ассоциированных действий в формате JSON

![](../../../../../.gitbook/assets/oktell\_script\_status\_icon.jpg)

![](../../../../../.gitbook/assets/oktell\_script\_status\_params.jpg)

### Формат значения списка действий

Используется формат JSON:

```javascript
{
   "actions": [
      {
         "type": "openRecord",
         "title": "Открыть ...",
         "catalogId": "3",
         "recordId": "1",
         "triggerImmediately": true,
         "number": "89012345678"
      },
      {
         "type": "createRecord",
         "title": "Создать ...",
         "catalogId": "3",
         "triggerOnAbonentClick": true
      }
   ]
}
```

#### Параметры

![](<../../../../../.gitbook/assets/oktell\_script\_status\_params (1).jpg>)

* **actions\[]** — набор ассоциированных действий
* **action.type** — тип действия: openRecord — открыть карточку существующей записи, createRecord — открыть карточку новой записи
* **action.title** — название действия, отображаемое сотруднику
* **action.catalogId** — номер каталога
* **action.recordId** — номер записи в каталоге. Для действия createRecord не указывается
* **action.number** — номер абонента, с которым связано действие. Используется в конференциях и при переводах звонка (необязательный параметр)
* **action.triggerOnAbonentClick** — действие по умолчанию, если нажать на номер телефона в панели телефонии (необязательный параметр, по умолчанию false)
* **action.triggerImmediately** — автоматически открывать карточку при звонке (необязательный параметр, по умолчанию false)

# Актуализация

## Описание

{% hint style="success" %}
Актуализируйте значения в исторических записях при добавлении новых полей или изменении бизнес-логики.
{% endhint %}

Паттерн актуализации рекомендует обновлять значения полей уже созданных записей в случаях, когда в каталог было добавлено новое поле или изменена логика заполнения существующих.

<div><figure><img src="../../.gitbook/assets/1 (26).png" alt="" width="375"><figcaption><p><mark style="color:red;">Здесь данные неактуальны</mark></p></figcaption></figure> <figure><img src="../../.gitbook/assets/2 (26).png" alt="" width="375"><figcaption><p><mark style="color:green;">А здесь актуальны</mark></p></figcaption></figure></div>

## Проблематика

Несоблюдение паттерна _актуальности_ может привести ко многим проблемам, связанным с несоответствием текущего состояния записей их фактическому состоянию.

В качестве примера можем рассмотреть реализацию таск-трекера, которая была ранее описана в паттерне [унификации](unifikaciya.md).

Таск-трекер состоит из поступающих запросов и задач для их решения. В каждом запросе есть некоторый набор полей дедлайн, до которого он должен быть закрыт.

Так выглядит карточка запроса:

<figure><img src="../../.gitbook/assets/3 (22).png" alt="" width="563"><figcaption></figcaption></figure>

При наступлении дедлайна система изменяет поле “Просрочен” на значение “Да” и отправляет уведомление ответственному за задачу сотруднику.

Также на значение “Да” поля “Просрочен” настроен вид, который позволяет быстро увидеть список просроченных запросов:

<div align="left"><figure><img src="../../.gitbook/assets/4 (23).png" alt="" width="295"><figcaption></figcaption></figure></div>

В записи рассмотренного запроса видим, что его дедлайн уже наступил, но он не был помечен просроченным:

<figure><img src="../../.gitbook/assets/5 (20).png" alt="" width="563"><figcaption></figcaption></figure>

Этот запрос не попал под вид просроченных запросов и по нему не было отправлено уведомление:

<figure><img src="../../.gitbook/assets/6 (21).png" alt="" width="563"><figcaption></figcaption></figure>

Следствием несоблюдения _паттерна актуальности_ могут быть следующие проблемы:

* Введение сотрудников в заблуждение
* Некорректная работа сценариев автоматизаций

### Введение сотрудников в заблуждение

В рассмотренном примере сотрудники, которые пользуются видом на просмотр просроченных запросов не проинформированы о просрочке запроса. Из-за этого меры по отработке наступления дедлайна могут не быть предприняты оперативно.

В общем случае подобная ситуация может привести к убыткам организации или снижения доверия к ней со стороны подрядчиков и клиентов.

### Некорректная работа сценариев автоматизаций

На переключение статуса “Просрочен” в значение “Да” настроена автоматизация на отправку уведомления ответственному сотруднику. Поле со статусом не было изменено и ответственному сотруднику не ушло уведомление о наступившем дедлайне.

То есть ответственный сотрудник может быть не в курсе того, что дедлайн по его запросу уже наступил.

В более общем случае на изменение подобного поля может быть настроена другая, более критичная логика. Эта логика также не сработает, потому что не отработает событие, связанное с изменением отслеживаемого поля.

## Применение паттерна

Решить описанные проблемы можно используя паттерн _актуализации_.

Для описанного выше примера нужно настроить дополнительный сценарий, запускающийся по механизму “[**Планировщика задач**](../../cases/automations/planirovshik-zadach.md)”, который будет ежедневно (или с другим интервалом) актуализировать статус просроченности каждого запроса.

В этом случае каждый запрос всегда будет содержать актуальную информацию о наступившем дедлайне.

Таким образом, сотрудники, использующий преднастроенный вид на просмотр просроченных запросов будут в курсе о наступлении дедлайна, а ответственный получит уведомление о нарушении сроков.

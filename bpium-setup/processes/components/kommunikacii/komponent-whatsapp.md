# Компонент WhatsApp



Компонент «WhatsApp» позволяет автоматически отправлять сообщения, медиафайлы и другие данные в чаты WhatsApp прямо из бизнес-процессов Bpium. Это мощный инструмент для мгновенных уведомлений клиентов, оповещений сотрудников и автоматизации коммуникаций.

#### &#x20;Общие свойства

* Название (обязательное) — Уникальное имя компонента для его идентификации внутри процесса.
* Описание (необязательное) — Дополнительная информация о назначении компонента.

Область применения: Автоматизация, Уведомления, Интеграции

<figure><img src="../../../../.gitbook/assets/image (240).png" alt=""><figcaption></figcaption></figure>

## Подключение

Перед использованием компонента требуется настройка авторизации.

* Авторизационный токен (обязательное) - Ключ доступа для интеграции с WhatsApp API. Выберите заранее настроенное подключение из списка доступных. Чтобы получить токен ознакомьтесь с правилами работы сервиса токенов bpium. Подробнее про [Сервис получения токенов](komponent-telegram/servis-polucheniya-tokenov.md).

<figure><img src="../../../../.gitbook/assets/image (241).png" alt=""><figcaption></figcaption></figure>

## &#x20;Параметры

* **Действие**  — Выберите действие, которое должен выполнить компонент. Доступные действия:
  * **Отправить сообщение**
  * **Отправить геолокацию**
  * **Отправить контакт**
  * **Отправить реакцию на сообщение**
  * **Переслать сообщение**
  * **Изменить сообщение**
  * **Удалить сообщение**
* **Диалог** — Уникальный идентификатор чата в WhatsApp, куда будет отправлено сообщение. Это может быть номер телефона в международном формате (например, +79001234567) или идентификатор группового чата.
* **Текст** — Текстовая часть отправляемого сообщения. Поддерживаются статический текст и динамические данные через выражения из процесса.
* **Вложения** — Позволяет прикрепить к сообщению файлы (изображения, документы, видео, аудио). Для загрузки файла укажите выражение, которое возвращает его fileId (Формат: массив объектов вида \[ { title: "...", url: "https://..." }, ... ]).
* **Формат отправки вложений** — Определяет способ отправки медиафайлов:
  * **Медиа**
  * Документ

<figure><img src="../../../../.gitbook/assets/image (242).png" alt=""><figcaption></figcaption></figure>

<figure><img src="../../../../.gitbook/assets/image (243).png" alt=""><figcaption></figcaption></figure>

## &#x20;         Результат

Результат работы компонента можно сохранить для последующего использования в процессе.

* Сохранить в — Укажите имя переменной, в которую будет записан ответ от WhatsApp API. В переменной сохранится объект с данными отправленного сообщения (например, его уникальный идентификатор), что полезно для дальнейших операций с сообщением (редактирование, удаление, добавление реакций).



<figure><img src="../../../../.gitbook/assets/image (244).png" alt=""><figcaption></figcaption></figure>

## Пример использования

### Напоминание о записи на прием

Цель: За 24 часа до запланированного приема отправить напоминание клиенту в WhatsApp.





1. **Создайте сценарий, инициируемый по расписанию для каталога «Записи на прием».**
2. **Добавьте компонент «WhatsApp» в холст процесса.**
3. **Настройте подключение:** в поле Авторизационный токен выберите заранее настроенное подключение к WhatsApp API.
4. **Заполните параметры:**

*  Действие:    Отправить сообщение
* Диалог:    allValues.clientPhone (номер телефона клиента из записи)
* Текст:  Добрый день, ${allValues.clientName}! Напоминаем о вашей записи на завтра, ${allValues.appointmentDate}, в ${allValues.appointmentTime}. Специалист: ${allValues.specialistName}. Будем ждать вас!

4. **Сохраните сценарий.**

Теперь за сутки до визита клиент получит автоматическое напоминание в WhatsApp со всеми деталями записи.

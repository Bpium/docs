# Компании

## Введение

Системный каталог **Компании** — это один из ключевых каталогов Бипиум, который обеспечивает мультитенантную архитектуру системы. Каждая компания в Бипиум представляет собой отдельное рабочее пространство со своей базой данных, настройками и пользователями.

Каталог **Компании** доступен администраторам серверной версии Бипиум и позволяет управлять всеми компаниями, зарегистрированными в системе.

## Назначение каталога

Каталог **Компании** используется для:

* **Изоляции данных**: каждая компания имеет свою отдельную базу данных, что обеспечивает полную изоляцию информации между разными компаниями
* **Мультидоменной поддержки**: компании могут работать на разных поддоменах или собственных доменах
* **Управления версиями**: контроль версий системы для каждой компании или группы компаний
* **Группировки компаний**: объединение компаний в группы для массовых операций и управления версиями
* **Брендирования**: настройка внешнего вида интерфейса для каждой компании (логотип, фавиконка, фон)

## Доступ к каталогу

Каталог **Компании** находится в разделе **Система** и доступен только администраторам сервера Бипиум.

**Как открыть каталог:**

1. Войдите в систему с правами администратора
2. Перейдите в раздел **Система**&#x20;
3. Выберите каталог **Компании**

## Поля каталога

Поля в каталоге отображаются в следующем порядке:

| Поле                 | Тип        | Описание                                                                                                                                                                                          |
| -------------------- | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Название компании    | Текст      | Отображаемое имя компании, используется в интерфейсе                                                                                                                                              |
| База данных          | Текст      | Строка подключения к базе данных (заполняется автоматически)                                                                                                                                      |
| Поддомен             | Текст      | Поддомен для доступа к компании (например, `mycompany`). В облачном режиме формируется адрес `поддомен.основной-домен` (например, `mycompany.bpium.ru`). Поддомен должен быть уникальным          |
| Создатель            | Число      | ID аккаунта пользователя, создавшего компанию                                                                                                                                                     |
| Группа               | Связь      | Связь с каталогом "Группы компаний" для управления версиями. Версия для обновления берется из группы. Подробнее см. в документации по каталогу Группы компаний                                    |
| Текущая версия       | Связь      | Текущая версия системы компании (только для чтения). Это поле отражает фактическую версию после обновления и обновляется автоматически. Изменение этого поля напрямую **не запускает обновление** |
| Статус               | Список     | Статус компании: "Готов" или "Обновляется"                                                                                                                                                        |
| Телефон              | Текст      | Контактный телефон компании                                                                                                                                                                       |
| **Лицензия**         | **Секция** |                                                                                                                                                                                                   |
| Серийный номер       | Текст      | Серийный номер лицензии компании                                                                                                                                                                  |
| **Брендирование**    | **Секция** |                                                                                                                                                                                                   |
| Логотип              | Файл       | Логотип компании (PNG, рекомендуется 200x60px)                                                                                                                                                    |
| Фавиконка            | Файл       | Иконка сайта (PNG/ICO, 64x64px)                                                                                                                                                                   |
| Домен                | Текст      | Собственный домен компании (опционально, например, `mycompany.com`). Имеет приоритет над поддоменом при определении компании                                                                      |
| Фон приложения       | Файл       | Фоновое изображение интерфейса (JPG, рекомендуется 1920x1080px)                                                                                                                                   |
| **Параметры**        | **Секция** |                                                                                                                                                                                                   |
| Последняя активность | Дата       | Дата и время последней активности пользователей в компании                                                                                                                                        |
| Число записей        | Число      | Общее количество всех записей в системе                                                                                                                                                           |

## Практические сценарии

### Работа с доменами

#### Поддомены

В облачном режиме (multitenancy) каждая компания получает поддомен, который формирует адрес доступа к компании:

* Формат: `поддомен.основной-домен` (например, `mycompany.bpium.ru`)
* Поддомен должен быть уникальным для каждой компании
* Устанавливается при создании компании и обычно не изменяется

#### Собственные домены

Компания может использовать собственный домен вместо поддомена. Это позволяет использовать свой бренд в адресе (например, `mycompany.com`).

**Приоритет при определении компании:**

* Сначала проверяется собственный домен (поле **Домен**)
* Если собственного домена нет или запрос приходит с основного хоста сервера, используется поддомен

**Как настроить собственный домен:**

1. **Настройка DNS:**
   * Настройте DNS-запись типа A или CNAME, указывающую на IP-адрес сервера Бипиум
2. **Настройка в Бипиум:**
   * Откройте запись компании в каталоге **Компании**
   * В поле **Домен** укажите полное доменное имя (например, `mycompany.com`)
   * Сохраните изменения
3. **Настройка веб-сервера:**
   * Настройте веб-сервер (nginx/Apache) для обработки запросов к вашему домену
   * Настройте SSL-сертификат для домена
   * Подробности см. в документации по развертыванию Бипиум

> **Примечание:** В enterprise-режиме (однотенантный) все компании работают через один домен. Подробные инструкции по настройке собственных доменов см. в документации по развертыванию Бипиум.

### Настройка брендирования

Подробная инструкция по настройке брендирования доступна в статье [Брендирование (White Label)](https://docs.bpium.ru/deployment/nastroika-i-zapusk/whitelabel).

**Краткая инструкция:**

1. Откройте запись компании в каталоге **Компании**
2. Найдите раздел **Брендирование**
3. Загрузите файлы:
   * **Логотип** — PNG, рекомендуется 200x60px, не более 2 МБ
   * **Фавиконка** — PNG/ICO, 64x64px, не более 500 КБ
   * **Фон приложения** — JPG, рекомендуется 1920x1080px, не более 5 МБ
4. Сохраните изменения

## Лицензирование и режимы работы

Компании связаны с системой лицензирования Бипиум:

* Лицензия определяет доступные модули и функции для компании
* Ограничения лицензии применяются на уровне компании
* Каждая компания может иметь свою конфигурацию лицензии

**Режимы работы:**

* **С лицензией**: полный доступ ко всем функциям и модулям, определенным лицензией
* **Без лицензии (песочница)**: доступна только базовая функциональность, автоматизации недоступны

Серийный номер лицензии хранится в поле **Серийный номер** записи компании (если используется лицензионная версия).

## Статусы компании

Компания может находиться в следующих статусах:

| Статус          | Описание                                                                                               |
| --------------- | ------------------------------------------------------------------------------------------------------ |
| **Готов**       | Компания работает нормально, все операции выполняются                                                  |
| **Обновляется** | Компания находится в процессе обновления версии приложения, временно недоступна для некоторых операций |

Статус **Обновляется** устанавливается автоматически системой при выполнении обновления версии приложения компании. После завершения обновления статус автоматически меняется на **Готов**.

> **Важно:** Во время обновления пользователи могут испытывать задержки или временную недоступность системы. Обновление обычно занимает от нескольких секунд до нескольких минут в зависимости от объема данных.

## Поддержка

Если у вас возникли вопросы или проблемы при работе с каталогом Компании, обратитесь к технической поддержке Бипиум [support@bpium.ru](mailto:support@bpium.ru), предоставив:

* Версию Бипиум
* Лицензию (серийный номер)
* Описание проблемы или вопроса
* Скриншоты (если применимо)

## Дополнительные ресурсы

* [Документация по настройке доменов](https://docs.bpium.ru/deployment/nastroika-i-zapusk/multidomennaya-sreda)
* [Документация по брендированию](https://docs.bpium.ru/deployment/nastroika-i-zapusk/whitelabel)
* [Документация по каталогу Аккаунты](akkaunty.md)
* [Документация по каталогу Группы компаний](gruppy-kompanii.md)

---
description: Автоматическое изменение записей в каталоге.
---

# Массовое изменение записей

## 1. **Введение**

Массовое изменение записей — процесс автоматического изменения неограниченного числа записей в каталоге посредством работы соответствующего сценария. Кейс в необходимости изменения большого числа записей встречается повсеместно, например при внедрении нового поля в каталог или же для актуализации всех записей каталога.

## 2. Принцип работы

![](<../../.gitbook/assets/0 (1).jpg>)

При обращении к внешнему запросу в требуемой системе запускается сценарий на изменение записей в каталоге. Сценарий проходит по всем записям из каталога и меняет необходимое поле/поля, заменяя значение на требуемое.

## **3. Реализация**

### **3.1. Настройка структуры данных**

#### 3.1.1. Создание сценария изменения записей

В системном каталоге «Сценарии» создайте новую запись и заполните карточку, согласно скриншоту ниже. В качестве файла сценария необходимо загрузить [следующий файл](https://drive.google.com/file/d/1fEiPcSiiSp6igwBgxudOrn8MfORwsbO\_/view?usp=sharing).

![](<../../.gitbook/assets/1 (7).png>)

#### 3.1.2. Создание внешнего запроса для сценария

В системном каталоге «Внешние запросы» создайте новую запись и заполните ее следующим образом:

![](<../../.gitbook/assets/2 (5).png>)

В качестве сценария внешнего запроса выберите сценарий, созданный ранее.

### **3.2. Настройка сценария автоматизации**

Ранее созданный сценарий для массового изменения записей выглядит следующим образом:

![](<../../.gitbook/assets/3 (6).png>)

В сценарии необходимо отредактировать выделенные компоненты, согласно описанию внутри каждого из них. Компоненты, которые необходимо отредактировать:

* Получение пачки записей
* Изменение i-ой записи в пачке

В каждом из вышеуказанных компонентов необходимо указать каталог для изменения записей и указать соответствующие фильтры для поиска записей, если планируется редактировать только записи, соответствующие определенному критерию.

### 3.3. Запуск сценария из внешнего запроса

Для запуска сценария во внешнем запросе используется HTTP-клиент Postman. Для инициализации работы сценария необходимо отправить асинхронный GET запрос на адрес внешнего запроса, созданного ранее. Пример создания запроса представлен на скриншоте ниже:

![](<../../.gitbook/assets/4 (4).png>)

Вместо «your» впишите свой домен системы на Бипиуме. После отправки запроса запустится сценарий массового изменения записей в каталоге. Отслеживать статус работы сценария можно из системного каталога «Процессы».

## **4. Тестирование**

### **4.1. Настройка структуры данных**

#### **4.1.1. Создание целевого каталога для тестирования**

Для тестирования процесса массового изменения записи создайте в системе новый тестовый каталог и заполните его следующим образом. Поля создавать нужно в том же порядке:

![](<../../.gitbook/assets/5 (6).png>)

* **Текстовое поле** (Текст)\
  ****Описание: Поле для хранения произвольного текста.\
  Настройки: Текст.
* **Число** (Число)\
  Описание: Поле для хранения произвольного числа.
* **Дата** (Дата)\
  Описание: Поле для хранения произвольной даты.
* **Статус** (Статус)\
  Описание: Поле с произвольными статусами.\
  Настройка значения: Раз, Два, Три.
* **Файл** (Файл)\
  Описание: Поле для хранения произвольного файла.

#### 4.1.2. Создание сценария заполнения каталога

В системном каталоге «Сценарии» создайте новую запись и заполните карточку следующим образом:

![](<../../.gitbook/assets/6 (4).png>)

В качестве файла сценария приложите [следующий файл](https://drive.google.com/file/d/1mK6jFu3Xid8dZc5U3w8BqrSajQZwDsPW/view?usp=sharing).

#### **4.1.3. Создание внешнего запроса для сценария заполнения каталога**

В системном каталоге «Внешние запросы» создайте новую запись и заполните ее следующим образом:

![](<../../.gitbook/assets/7 (3).png>)

В качестве сценария запроса выберите созданный на предыдущем шаге сценария заполнения каталога.

### **4.2. Настройка сценария заполнения каталога**

Ранее созданный сценарий для заполнения каталога выглядит следующим образом:

![](<../../.gitbook/assets/8 (3).png>)

В сценарии необходимо отредактировать выделенный компонент «Создать» запись. В поле «Каталог» карточки компонента необходимо выбрать созданный ранее тестовый каталог «Массовое изменение записей».

### **4.3. Запуск сценариев**

#### **4.3.1. Запуск сценария заполнения каталога**

Для запуска сценария заполнения каталога через HTTP-клиент Postman отправьте следующий запрос:

![](<../../.gitbook/assets/9 (3).png>)

Вместо «your» впишите домен вашей системы на Бипиуме. Статус работы сценария можно отслеживать из системного каталога «Процессы».

В процессе работы сценария в тестовом каталоге будут постепенно создаваться 1200 тестовых записей. Результаты работы представлены ниже:

![](<../../.gitbook/assets/10 (5).png>)

#### **4.3.2. Запуск сценария массового изменения записей**

Для запуска сценария массового изменения записей в каталоге через HTTP-клиент Postman отправьте следующий запрос:

![](<../../.gitbook/assets/4 (4).png>)

Вместо «your» впишите домен своей системы на Бипиуме. Статус работы сценария можно отслеживать из системного каталога «Процессы».

### **4.4. Результат**

В результате работы сценария во все файлы каталога был добавлен файл в соответствующее поле. Результат работы представлен на скриншоте ниже:

![](<../../.gitbook/assets/11 (3).png>)

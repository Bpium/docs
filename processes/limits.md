# Ограничения

## Список ограничений

{% hint style="info" %}
Сводный список ограничений. Подробный смысл параметров описан ниже.
{% endhint %}

### **В облачной версии Bpium**

В облачной версии параметры ограничения заданы фиксировано.

Параметры замедления исполнения:

* `BPM_STEP_SIZE`: число компонентов в шаге (50 компонентов).
* `BPM_STEP_TIMEOUT`: ограничение по длительности исполнения шага (15 минут).
* `BPM_STEP_MAX_DELAY_ON`: число шагов процесса, при котором достигается максимальная задержка между шагами для замедления исполнения (1000).
* `BPM_STEP_MAX_DELAY`: максимальная задержка исполнения между шагами (1 минута).

Параметры памяти:

* `BPM_PROCESS_INPUT_LIMIT`: максимальный размер входных параметров (1 Мб).
* `BPM_PROCESS_DATA_LIMIT`: максимальный размер данных (512 Кб).
* `BPM_PROCESS_RESULT_LIMIT`: максимальный размер выходных параметров, сохраняемых в каталог Процессы (10 Кб).
* `BPM_DOWNLOA_DATA_LIMIT`: максимальный размер загружаемых данных компонентом веб-запрос или генерация файлов (1 Мб).

### **В серверной версии Bpium**

Задать параметры ограничения выполнения сценариев можно в конфигурационном файле.\
В документации по установке приведен полный список параметров и инструкцию как их задать.

## **Пояснения к параметрам**

### **Таймаут шага**

Бипиум исполняет процессы частями по 50 компонентов (шаг). Время выполнения шага ограничено. Если время превышено, то шаг процесса прервется на последнем завершенном компоненте. Эта ситуация считается корректным завершением шага. Следующий шаг начнется со следующего компонента сценария.

В версии для установки на свой сервер эти параметры настраиваемые:

`BPM_STEP_SIZE` — количество компонентов в шаге.

`BPM_STEP_TIMEOUT` — ограничение времени выполнения шага (в миллисекундах).\
По умолчанию: `BPM_STEP_TIMEOUT` \* 10 \* 1000.



### **Замедление исполнения**

Бипиум исполняет процессы частями (шагами по 50 компонентов), каждый шаг с небольшой увеличивающейся паузой. Это позволяет отловить зацикленные сценарии и избежать потерь производительности вашей системы. Пауза между шагами:

* 1 шаг (50 компонентов): 0,8 сек.
* 5-й шаг (250 компонентов): 0,4 сек.
* 10 шаг (500 компонентов): 0,9 сек.
* 20 шаг (1000 компонентов): 1,7 сек.
* 50 шаг (2500 компонентов): 4,2 сек.
* 100 шаг (5000 компонентов): 8,3 сек.
* 200 шаг (10 000 компонентов): 15,8 сек
* 500 шаг (25 000 компонентов): 35 сек
* 1000 шаг (50 000 компонентов): 1 минута.
* 10 000 шаг (500 000 компонентов): 3 минуты 28 сек.

В версии для установки на свой сервер эти параметры настраиваемые:

`BPM_STEP_MAX_DELAY_ON` — число шагов процесса, при котором достигается «максимальная» пауза (1000 шагов), `BPM_STEP_MAX_DELAY` — «максимальная» пауза между шагами (1 минута). Пауза конкретного шага рассчитывается по формуле:

`BPM_STEP_MAX_DELAY * log10( ШАГ / BPM_STEP_MAX_DELAY_ON + 1 ) / log10(2)`

{% hint style="warning" %}
Формула в версии до 1.5: `BPM_STEP_MAX_DELAY * ( ШАГ / BPM_STEP_MAX_DELAY_ON ) ^ 2`
{% endhint %}



### **Ограничение длительности процесса**

Бипиум ограничивает время исполнения процесса — 7 дней. При превышении процесс останавливается с ошибкой и возвратом текущих значений.

В версии для установки на свой сервер этот параметр настраиваемый:

`BPM_PROCESS_TIMEOUT` — максимальная длительность исполнения процесса (в миллисекундах).



### **Ограничение числа одновременных процессов компании**

Бипиум ограничивает число одновременно исполняемых процессов для компании — 100 процессов. При превышении, Бипиум возвращает ошибку 429 (Too Many Requests).

В версии для установки на свой сервер этот параметр настраиваемый:

`BPM_PROCESS_LIMIT` — максимальное число одновременно выполняемых процессов.



### **Ограничение размера переменных процесса**

Бипиум ограничивает общий размер переменных процесса — 512 кб. Если размер превышен, то процесс останавливается с ошибкой и возвратом текущих значений.

В версии для установки на свой сервер этот параметр настраиваемый:

`BPM_PROCESS_DATA_LIMIT` — максимальный размер переменных процесса (в байтах).


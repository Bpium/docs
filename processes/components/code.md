# Код (Javascript)

Используется для исполнения кода на языке JavaScript. Компонент имеет выход по таймауту. Таймаут 5 секунд.

## Свойства

### Секция «Код»

**Входные переменные**  \
Для безопасности код не имеет доступа ко всем переменным сценария. Входные переменные определяют те переменные, которые будут проброшены в контекст исполняемого JS-кода. Формат: список «локальная переменная = текст/выражение/глобальная переменная сценария».

**Код**  \
Фрагмент кода на языке Javascript. Допустимо использовать локальные переменные, переданные через свойство«входные параметры», функции и встроенные объекты Javascript. Недопустимы функции: setInterval, setTimeout и setImmediate и другие асинхронные функции. Код возвращает итоговое значение через конструкцию return. Формат: код на JS.

Пример:

```javascript
let a = 10;
return a*a;
```

#### Чем компонент код отличается от выражений?

Компонент код — то же вычислимое выражение. Разница в том, что в компоненте код доступны вспомогательные JS-библиотеки, упрощающие работу с данными:

* [Lodash](https://lodash.com/) (\_) — набор расширенных функций для работы с массивами, объектами, строками
* [Moment](https://momentjs.com/) (Moment JS)— набор функций для работы с датами.

Пример:

```javascript
let a = moment().add(1, 'days').calendar();
let b = _.concat(array, 2, [3], [[4]]);
return a;
```

### Секция «Результат»

**Сохранить в**  \
Выходной параметр. Сохраняет результат исполнения кода (возвращенные посредством `return`) в указанную переменную процесса. Формат: имя переменной.

{% hint style="info" %}
В поле «**Сохранить в**» можно указать ключ объекта и результат исполнения кода сохранится как значения этого ключа.
{% endhint %}

## Пограничные события

![](../../.gitbook/assets/boundary\_any.png)

Компонент поддерживает 2 типа пограничных событий:

* Ошибка — выход из компонента, если произошла какая-либо ошибка
* Таймаут — выход из компонента, спустя заданное ограничение по времени

Если компонент завершился с ошибкой, но на нем не было пограничного события, то процесс завершается. Сообщение ошибки возвращается в результатах процесса.
